let Q=G;const S={},w=1,E=2,L={owned:null,cleanups:null,context:null,owner:null};var u=null;let A=null,h=null,d=null,r=null,p=null,T=0;function V(e,s){s&&(u=s);const t=h,l=u,i=e.length===0?L:{owned:null,cleanups:null,context:null,owner:l};u=i,h=null;let f;try{N(()=>f=e(()=>B(i)),!0)}finally{h=t,u=l}return f}function m(e,s,t){I(K(e,s,!1,w))}function W(e){if(d)return e();let s;const t=d=[];try{s=e()}finally{d=null}return N(()=>{for(let l=0;l<t.length;l+=1){const i=t[l];if(i.pending!==S){const f=i.pending;i.pending=S,P(i,f)}}},!1),s}function j(e){let s,t=h;return h=null,s=e(),h=t,s}function P(e,s,t){if(e.comparator&&e.comparator(e.value,s))return s;if(d)return e.pending===S&&d.push(e),e.pending=s,s;let l=!1;return e.value=s,e.observers&&e.observers.length&&N(()=>{for(let i=0;i<e.observers.length;i+=1){const f=e.observers[i];l&&A.disposed.has(f),f.pure?r.push(f):p.push(f),f.observers&&(l&&!f.tState||!l&&!f.state)&&O(f),l||(f.state=w)}if(r.length>1e6)throw r=[],new Error},!1),s}function I(e){if(!e.fn)return;B(e);const s=u,t=h,l=T;h=u=e,J(e,e.value,l),h=t,u=s}function J(e,s,t){let l;try{l=e.fn(s)}catch(i){q(i)}(!e.updatedAt||e.updatedAt<=t)&&(e.observers&&e.observers.length?P(e,l):e.value=l,e.updatedAt=t)}function K(e,s,t,l=w,i){const f={fn:e,state:l,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:s,owner:u,context:null,pure:t};return u===null||u!==L&&(u.owned?u.owned.push(f):u.owned=[f]),f}function R(e){const s=A;if(e.state!==w)return e.state=0;if(e.suspense&&j(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<T);)(e.state||s)&&t.push(e);for(let l=t.length-1;l>=0;l--)if(e=t[l],e.state===w||s)I(e);else if(e.state===E||s){const i=r;r=null,M(e),r=i}}function N(e,s){if(r)return e();let t=!1;s||(r=[]),p?t=!0:p=[],T++;try{e()}catch(l){q(l)}finally{X(t)}}function X(e){r&&(G(r),r=null),!e&&(p.length?W(()=>{Q(p),p=null}):p=null)}function G(e){for(let s=0;s<e.length;s++)R(e[s])}function M(e){e.state=0;for(let s=0;s<e.sources.length;s+=1){const t=e.sources[s];t.sources&&(t.state===w||A?R(t):t.state===E&&M(t))}}function O(e){const s=A;for(let t=0;t<e.observers.length;t+=1){const l=e.observers[t];(!l.state||s)&&(l.state=E,l.pure?r.push(l):p.push(l),l.observers&&O(l))}}function B(e){let s;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),l=e.sourceSlots.pop(),i=t.observers;if(i&&i.length){const f=i.pop(),n=t.observerSlots.pop();l<i.length&&(f.sourceSlots[n]=l,i[l]=f,t.observerSlots[l]=n)}}if(e.owned){for(s=0;s<e.owned.length;s++)B(e.owned[s]);e.owned=null}if(e.cleanups){for(s=0;s<e.cleanups.length;s++)e.cleanups[s]();e.cleanups=null}e.state=0,e.context=null}function q(e){throw e}function v(e,s,t){let l=t.length,i=s.length,f=l,n=0,o=0,C=s[i-1].nextSibling,g=null;for(;n<i||o<f;){if(s[n]===t[o]){n++,o++;continue}for(;s[i-1]===t[f-1];)i--,f--;if(i===n){const c=f<l?o?t[o-1].nextSibling:t[f-o]:C;for(;o<f;)e.insertBefore(t[o++],c)}else if(f===o)for(;n<i;)(!g||!g.has(s[n]))&&e.removeChild(s[n]),n++;else if(s[n]===t[f-1]&&t[o]===s[i-1]){const c=s[--i].nextSibling;e.insertBefore(t[o++],s[n++].nextSibling),e.insertBefore(t[--f],c),s[i]=t[f]}else{if(!g){g=new Map;let a=o;for(;a<f;)g.set(t[a],a++)}const c=g.get(s[n]);if(c!=null)if(o<c&&c<f){let a=n,b=1,D;for(;++a<i&&a<f&&!((D=g.get(s[a]))==null||D!==c+b);)b++;if(b>c-o){const H=s[n];for(;o<c;)e.insertBefore(t[o++],H)}else e.replaceChild(t[o++],s[n++])}else n++;else e.removeChild(s[n++])}}}function Z(e,s,t){let l;return V(i=>{l=i,Y(s,e(),s.firstChild?null:void 0,t)}),()=>{l(),s.textContent=""}}function _(e,s,t){const l=document.createElement("template");l.innerHTML=e;let i=l.content.firstChild;return t&&(i=i.firstChild),i}function $(e,s,t){t==null?e.removeAttribute(s):e.setAttribute(s,t)}function Y(e,s,t,l){if(t!==void 0&&!l&&(l=[]),typeof s!="function")return x(e,s,l,t);m(i=>x(e,s(),i,t),l)}function x(e,s,t,l,i){for(;typeof t=="function";)t=t();if(s===t)return t;const f=typeof s,n=l!==void 0;if(e=n&&t[0]&&t[0].parentNode||e,f==="string"||f==="number")if(f==="number"&&(s=s.toString()),n){let o=t[0];o&&o.nodeType===3?o.data=s:o=document.createTextNode(s),t=y(e,t,l,o)}else t!==""&&typeof t=="string"?t=e.firstChild.data=s:t=e.textContent=s;else if(s==null||f==="boolean")t=y(e,t,l);else{if(f==="function")return m(()=>{let o=s();for(;typeof o=="function";)o=o();t=x(e,o,t,l)}),()=>t;if(Array.isArray(s)){const o=[];if(U(o,s,i))return m(()=>t=x(e,o,t,l,!0)),()=>t;if(o.length===0){if(t=y(e,t,l),n)return t}else Array.isArray(t)?t.length===0?F(e,o,l):v(e,t,o):t==null||t===""?F(e,o):v(e,n&&t||[e.firstChild],o);t=o}else if(s instanceof Node){if(Array.isArray(t)){if(n)return t=y(e,t,l,s);y(e,t,null,s)}else t==null||t===""||!e.firstChild?e.appendChild(s):e.replaceChild(s,e.firstChild);t=s}}return t}function U(e,s,t){let l=!1;for(let i=0,f=s.length;i<f;i++){let n=s[i],o;if(n instanceof Node)e.push(n);else if(!(n==null||n===!0||n===!1))if(Array.isArray(n))l=U(e,n)||l;else if((o=typeof n)==="string")e.push(document.createTextNode(n));else if(o==="function")if(t){for(;typeof n=="function";)n=n();l=U(e,Array.isArray(n)?n:[n])||l}else e.push(n),l=!0;else e.push(document.createTextNode(n.toString()))}return l}function F(e,s,t){for(let l=0,i=s.length;l<i;l++)e.insertBefore(s[l],t)}function y(e,s,t,l){if(t===void 0)return e.textContent="";const i=l||document.createTextNode("");if(s.length){let f=!1;for(let n=s.length-1;n>=0;n--){const o=s[n];if(i!==o){const C=o.parentNode===e;!f&&!n?C?e.replaceChild(i,o):e.insertBefore(i,t):C&&e.removeChild(o)}else f=!0}}else e.insertBefore(i,t);return[i]}export{m as c,Z as r,$ as s,_ as t};
